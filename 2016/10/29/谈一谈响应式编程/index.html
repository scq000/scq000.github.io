<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>è°ˆä¸€è°ˆå“åº”å¼ç¼–ç¨‹ | Paolino</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">è°ˆä¸€è°ˆå“åº”å¼ç¼–ç¨‹</h1><a id="logo" href="/.">Paolino</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">è°ˆä¸€è°ˆå“åº”å¼ç¼–ç¨‹</h1><div class="post-meta">Oct 29, 2016</div><div class="post-content"><p>éšç€å‰ç«¯æ¡†æ¶react,angularä»¥åŠvueçš„æµè¡Œï¼Œå“åº”å¼ç¼–ç¨‹ä¹Ÿå¼€å§‹åœ¨å‰ç«¯é¢†åŸŸå¾—ä»¥å¹¿æ³›åº”ç”¨ã€‚å› æ­¤ï¼Œäº†è§£å¹¶ä¸”ç†è§£å“åº”å¼ç¼–ç¨‹æœ‰åŠ©äºæ›´å¥½åœ°å­¦ä¹ è¿™äº›æ¡†æ¶ï¼ŒåŒæ—¶åˆ©ç”¨å¥½å“åº”å¼ç¼–ç¨‹çš„ç›¸å…³å·¥å…·ï¼Œå¯ä»¥è®©ç¼–ç¨‹æ›´åŠ è½»æ¾ã€‚</p>
<h1 id="ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹"><a href="#ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹" class="headerlink" title="ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹"></a>ä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹</h1><p>å’Œå¹³å¸¸ç»å¸¸å¬è¯´çš„é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹ä¸€æ ·ï¼Œå“åº”å¼ç¼–ç¨‹(Reactive Programming)å°±æ˜¯ä¸€ä¸ªç¼–ç¨‹èŒƒå¼ï¼Œä½†æ˜¯ä¸å…¶ä»–ç¼–ç¨‹èŒƒå¼ä¸åŒçš„æ˜¯å®ƒæ˜¯åŸºäºæ•°æ®æµå’Œå˜åŒ–ä¼ æ’­çš„ã€‚æˆ‘ä»¬ç»å¸¸åœ¨ç¨‹åºä¸­è¿™æ ·å†™</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">A</span> = B + C</span><br></pre></td></tr></table></figure>
<p><code>A</code>è¢«èµ‹å€¼ä¸º<code>B</code>å’Œ<code>C</code>çš„å€¼ã€‚è¿™æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ”¹å˜<code>B</code>çš„å€¼ï¼Œ<code>A</code>çš„å€¼å¹¶ä¸ä¼šéšä¹‹æ”¹å˜ã€‚è€Œå¦‚æœæˆ‘ä»¬è¿ç”¨ä¸€ç§æœºåˆ¶ï¼Œå½“<code>B</code>æˆ–è€…<code>C</code>çš„å€¼å‘ç°å˜åŒ–çš„æ—¶å€™ï¼Œ<code>A</code>çš„å€¼ä¹Ÿéšä¹‹æ”¹å˜ï¼Œè¿™æ ·å°±å®ç°äº†â€å“åº”å¼â€œã€‚</p>
<p>è€Œå“åº”å¼ç¼–ç¨‹çš„æå‡ºï¼Œå…¶ç›®çš„å°±æ˜¯ç®€åŒ–ç±»ä¼¼çš„æ“ä½œï¼Œå› æ­¤å®ƒåœ¨ç”¨æˆ·ç•Œé¢ç¼–ç¨‹é¢†åŸŸä»¥åŠåŸºäºå®æ—¶ç³»ç»Ÿçš„åŠ¨ç”»æ–¹é¢éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨å¤„ç†åµŒå¥—å›è°ƒçš„å¼‚æ­¥äº‹ä»¶ï¼Œå¤æ‚çš„åˆ—è¡¨è¿‡æ»¤å’Œå˜æ¢çš„æ—¶å€™ä¹Ÿéƒ½æœ‰è‰¯å¥½çš„è¡¨ç°ã€‚</p>
<h1 id="å‡½æ•°å“åº”å¼ç¼–ç¨‹"><a href="#å‡½æ•°å“åº”å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å“åº”å¼ç¼–ç¨‹"></a>å‡½æ•°å“åº”å¼ç¼–ç¨‹</h1><blockquote>
<p>è€Œä¸»è¦åˆ©ç”¨å‡½æ•°å¼ç¼–ç¨‹(Functional Programming)çš„æ€æƒ³å’Œæ–¹æ³•(å‡½æ•°ã€é«˜é˜¶å‡½æ•°)æ¥æ”¯æŒReactive Programmingå°±æ˜¯æ‰€è°“çš„<a href="http://en.wikipedia.org/wiki/Functional_reactive_programming" target="_blank" rel="noopener">Functional Reactive Programming</a>ï¼Œç®€ç§°FRPã€‚</p>
</blockquote>
<p>FPR å°†è¾“å…¥åˆ†ä¸ºä¸¤ä¸ªåŸºç¡€çš„éƒ¨åˆ†ï¼šè¡Œä¸º(behavior)å’Œäº‹ä»¶(events) ã€‚è¿™ä¸¤ä¸ªåŸºæœ¬å…ƒç´ åœ¨å‡½æ•°å“åº”å¼ç¼–ç¨‹ä¸­éƒ½æ˜¯ç¬¬ä¸€ç±»ï¼ˆfirst-classï¼‰å€¼ã€‚ å…¶ä¸­è¡Œä¸ºæ˜¯éšæ—¶é—´è¿ç»­å˜åŒ–çš„æ•°æ®ï¼Œè€Œäº‹ä»¶åˆ™æ˜¯åŸºäºç¦»æ•£çš„æ—¶é—´åºåˆ— ã€‚ä¾‹å¦‚ï¼šåœ¨æˆ‘ä»¬æ“ä½œç½‘é¡µçš„æ—¶å€™ï¼Œä¼šè§¦å‘å¾ˆå¤šçš„äº‹ä»¶ï¼ŒåŒ…æ‹¬ç‚¹å‡»ï¼Œæ‹–åŠ¨ï¼ŒæŒ‰é”®äº‹ä»¶ç­‰ã€‚è¿™äº›äº‹ä»¶éƒ½æ˜¯ä¸è¿ç»­çš„ã€‚å¯¹äº‹ä»¶æ±‚å€¼æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œæ‰€æœ‰æˆ‘ä»¬ä¸€èˆ¬è¦é€šè¿‡<code>fromEvent</code>ï¼Œ<code>buffer</code>ç­‰å°†å…¶å˜æˆè¿ç»­çš„è¡Œä¸ºæ¥åšè¿›ä¸€æ­¥å¤„ç†ã€‚ä¸RPç›¸æ¯”ï¼ŒFRPæ›´åé‡äºåº•å±‚ã€‚ç”±äºé‡‡ç”¨äº†å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼ŒFRPä¹Ÿè‡ªç„¶è€Œç„¶å¸¦æœ‰å…¶ç‰¹ç‚¹ã€‚è¿™å…¶ä¸­åŒ…æ‹¬äº†ä¸å¯å˜æ€§ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ä»¥åŠé€šè¿‡ç»„åˆå‡½æ•°æ¥æ„å»ºç¨‹åºç­‰ç‰¹ç‚¹ã€‚</p>
<h1 id="åº”ç”¨èŒƒå›´"><a href="#åº”ç”¨èŒƒå›´" class="headerlink" title="åº”ç”¨èŒƒå›´"></a>åº”ç”¨èŒƒå›´</h1><ol>
<li>å¤šçº¿ç¨‹ï¼Œæ—¶é—´å¤„ç†ï¼Œé˜»å¡ç­‰åœºæ™¯</li>
<li>ajaxï¼Œwebsocketå’Œæ•°æ®åŠ è½½</li>
<li>å¤±è´¥å¤„ç†</li>
<li>DOMäº‹ä»¶å’ŒåŠ¨ç”»</li>
</ol>
<h1 id="è§‚å¯Ÿè€…æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼</h1><p>åœ¨è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹è§‚å¯Ÿè€…æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼ï¼Œä¾¿äºå¯¹åç»­ä»‹ç»çš„æ¦‚å¿µæœ‰æ‰€äº†è§£ã€‚</p>
<h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><blockquote>
<p>è§‚å¯Ÿè€…æ¨¡å¼(Observer Pattern)ï¼šå®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡çš†å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚è§‚å¯Ÿè€…æ¨¡å¼åˆå«åšå‘å¸ƒ-è®¢é˜…ï¼ˆPublish/Subscribeï¼‰æ¨¡å¼ã€æ¨¡å‹-è§†å›¾ï¼ˆModel/Viewï¼‰æ¨¡å¼ã€æº-ç›‘å¬å™¨ï¼ˆSource/Listenerï¼‰æ¨¡å¼æˆ–ä»å±è€…ï¼ˆDependentsï¼‰æ¨¡å¼ã€‚</p>
</blockquote>
<p>è§‚å¯Ÿè€…æ¨¡å¼åœ¨äº‹ä»¶å¤„ç†ä¸­åº”ç”¨ç‰¹åˆ«å¹¿æ³›ï¼Œä¹Ÿæ˜¯MVCæ¶æ„æ¨¡å¼çš„æ ¸å¿ƒã€‚æˆ‘ä»¬æ¥å†™ä¸€ä¸ªç®€å•çš„åº”ç”¨ï¼Œè¯•ä¸€è¯•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›‘å¬è€…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(index) &#123;</span><br><span class="line">    <span class="keyword">this</span>.index = index;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  say() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`æˆ‘æ˜¯ç¬¬<span class="subst">$&#123;<span class="keyword">this</span>.index&#125;</span>ä¸ªç”¨æˆ·ğŸ˜`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  update() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'observer : æˆ‘å¼€å§‹è¯´è¯äº†'</span>);</span><br><span class="line">    <span class="keyword">this</span>.say();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¢«ç›‘å¬è€…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.observers = [];</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  addObserver(observer) &#123;</span><br><span class="line">    <span class="keyword">this</span>.observers.push(observer);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  removeObserverByIndex(index) &#123;</span><br><span class="line">    <span class="keyword">this</span>.observers.splice(index,<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  notify() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Observable : å¼€å§‹é€šçŸ¥æ‰€æœ‰ç›‘å¬è€…'</span>);</span><br><span class="line">    <span class="keyword">this</span>.observers.forEach(<span class="function"><span class="params">x</span> =&gt;</span> x.update());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å®¢æˆ·ç«¯ä»£ç ï¼Œæ³¨å†Œç›‘å¬</span></span><br><span class="line"><span class="keyword">const</span> observer1 = <span class="keyword">new</span> Observer(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> observer2 = <span class="keyword">new</span> Observer(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> observable = <span class="keyword">new</span> Observable();</span><br><span class="line">observable.addObserver(observer1);</span><br><span class="line">observable.addObserver(observer2);</span><br><span class="line"><span class="comment">//é€šçŸ¥æ‰€æœ‰ç›‘å¬è€…</span></span><br><span class="line">observable.notify();</span><br></pre></td></tr></table></figure>
<p> æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Observable : å¼€å§‹é€šçŸ¥æ‰€æœ‰ç›‘å¬è€…"</span></span><br><span class="line"><span class="string">"observer : æˆ‘å¼€å§‹è¯´è¯äº†"</span></span><br><span class="line"><span class="string">"æˆ‘æ˜¯ç¬¬1ä¸ªç”¨æˆ·ğŸ˜"</span></span><br><span class="line"><span class="string">"observer : æˆ‘å¼€å§‹è¯´è¯äº†"</span></span><br><span class="line"><span class="string">"æˆ‘æ˜¯ç¬¬2ä¸ªç”¨æˆ·ğŸ˜"</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç§æ¨¡å¼ï¼Œpushå’Œpull:</p>
<p>1.pushâ€œæ¨æ¨¡å¼â€œï¼Œå°±æ˜¯è¢«ç›‘å¬è€…å°†æ¶ˆæ¯æ¨é€å‡ºå»ï¼Œè¿›è€Œè§¦å‘ç›‘å¬è€…çš„ç›¸åº”äº‹ä»¶ã€‚å¦‚ä¸Šé¢çš„äº‹ä¾‹ä»£ç å°±æ˜¯é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œå“åº”å¼ç¼–ç¨‹ä¸€èˆ¬é‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚</p>
<p>2.pullâ€æ‹‰æ¨¡å¼â€ï¼Œå°±æ˜¯ç›‘å¬è€…ä¸»åŠ¨ä»è¢«ç›‘å¬è€…å¤„è·å–æ•°æ®ã€‚</p>
<h2 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h2><blockquote>
<p>æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²å†…éƒ¨çš„è¡¨ç¤ºã€‚</p>
</blockquote>
<p>è¿­ä»£å™¨æ¨¡å¼å¸¸ç”¨çš„åœºåˆæ˜¯åœ¨éå†é›†åˆï¼Œå¢åˆ æ”¹æŸ¥çš„æ—¶å€™ã€‚å¦‚ä»Šï¼Œå¾ˆå¤šçš„é«˜çº§è¯­è¨€éƒ½å·²ç»å°†å…¶ä½œä¸ºè‡ªèº«çš„è¯­è¨€ç‰¹æ€§ï¼Œå¦‚python,javaï¼Œes6ç­‰éƒ½æœ‰å…¶å®ç°ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨es5çš„è¯­æ³•ç®€å•å®ç°ä¸€ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIterator</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> nextIndex = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">       next: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="keyword">return</span> nextIndex &lt; array.length ?</span><br><span class="line">               &#123;<span class="attr">value</span>: array[nextIndex++], <span class="attr">done</span>: <span class="literal">false</span>&#125; :</span><br><span class="line">               &#123;<span class="attr">done</span>: <span class="literal">true</span>&#125;;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> iterator = getIterator([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br><span class="line">iterator.next().value; <span class="comment">// 1</span></span><br><span class="line">iterator.next().value; <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šçš„ä»£ç åˆ©ç”¨äº†javscriptè¯­æ³•çš„é—­åŒ…ç‰¹æ€§ï¼Œè¿”å›äº†ä¸€ä¸ªå¸¦çŠ¶æ€çš„å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨<code>next</code>æ–¹æ³•æ¥è·å–é›†åˆä¸­çš„ä¸‹ä¸€ä¸ªå€¼ã€‚è¿™å’Œå‡½æ•°å¼ç¼–ç¨‹ä¸­éƒ¨åˆ†æ±‚å€¼çš„ç‰¹ç‚¹æ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸ªæ¨¡å¼å¾ˆç®€å•ï¼Œæˆ‘ä»¬åˆ©ç”¨å®ƒå°±å¯ä»¥ä¸å†éœ€è¦æ‰‹åŠ¨éå†è·å–é›†åˆä¸­çš„æ•°æ®äº†ã€‚</p>
<h1 id="RX-Reactive-Extension"><a href="#RX-Reactive-Extension" class="headerlink" title="RX(Reactive Extension)"></a>RX(Reactive Extension)</h1><p>Reactive Extension è¿™ä¸ªæ¦‚å¿µæœ€æ—©æ˜¯å‡ºç°åœ¨å¾®è½¯çš„.NETç¤¾åŒºä¸­çš„ï¼Œè€Œç›®å‰ä¹Ÿè¶Šæ¥è¶Šå¤šçš„è¯­è¨€å®ç°äº†è‡ªå·±çš„RXï¼Œå¦‚java,javascript,rubyç­‰ã€‚</p>
<p>å¾®è½¯å®˜æ–¹çš„è§£é‡Šæ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p> <strong>Reactive Extensions</strong> (<strong>Rx</strong>) is a library for composing asynchronous and event-based programs using observable sequences and LINQ-style query operators.</p>
</blockquote>
<p>ç®€å•åœ°æ¥è¯´å°±æ˜¯åˆ©ç”¨<code>Observable</code>å’Œ<code>LINQ</code>é£æ ¼çš„åŸºäºäº‹ä»¶é©±åŠ¨çš„ç¼–ç¨‹æ‰©å±•åº“ã€‚å®ƒæ˜¯å“åº”å¼ç¼–ç¨‹çš„ä¸€ç§å®ç°ï¼Œç”¨äºè§£å†³å¼‚æ­¥äº‹ä»¶æµçš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚é€šä¿—ç‚¹è§£é‡Šï¼Œå°±æ˜¯åˆ©ç”¨å®ƒå¯ä»¥å¾ˆå¥½åœ°æ§åˆ¶äº‹ä»¶æµçš„å¼‚æ­¥æ“ä½œï¼Œå°†äº‹ä»¶çš„å‘ç”Ÿå’Œå¯¹äº‹ä»¶çš„å“åº”è¿›è¡Œè§£è€¦ã€‚å¯ä»¥è®©å¼€å‘è€…ä¸å†å…³å¿ƒå¤æ‚çš„çº¿ç¨‹å¤„ç†ï¼Œé”ç­‰å¹¶å‘ç›¸å…³é—®é¢˜ã€‚</p>
<h2 id="RxJs"><a href="#RxJs" class="headerlink" title="RxJs"></a>RxJs</h2><p><a href="https://github.com/Reactive-Extensions/RxJS" target="_blank" rel="noopener">RxJS</a>æ˜¯ç”¨javascriptå®ç°çš„ä¸€ä¸ªRXç±»åº“ï¼Œ å®˜æ–¹è¯´æ˜é‡ŒæŒ‡å‡º<code>RxJS = Observables + Operators + Schedulers</code>ã€‚å…¶ä¸­<code>Observables</code>ç”¨äºç”Ÿäº§æ¶ˆæ¯ï¼Œè€Œ<code>Subscriber</code>åˆ™ç”¨äºæ¶ˆè´¹æ¶ˆæ¯ï¼Œè¿™å’Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„æ¦‚å¿µæœ‰ç‚¹ç±»ä¼¼ã€‚</p>
<p><code>Obversables</code>å…¶å®æ˜¯ä¸€ç»„äº‹ä»¶æµï¼Œæ¯”å¦‚ä½ åœ¨é”®ç›˜ä¸Šè¾“å…¥â€helloâ€è¿™äº”ä¸ªå­—æ¯ï¼Œä½ å°±æœ‰äº†â€h - e - l - l -oâ€åä¸ª<code>keydown + keyup</code>äº‹ä»¶ç»„æˆçš„ä¸€ç»„åºåˆ—ï¼Œè¿™å°±ç§°ä¸º<code>Obversables</code>ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸å¯æ›´æ”¹çš„ã€‚å¦‚æœä½ åªæƒ³è¦è¿‡æ»¤å‡º<code>keydown</code>äº‹ä»¶æ€ä¹ˆåšå‘¢ï¼Ÿè¿™æ—¶å€™ä½ å°±éœ€è¦åˆ©ç”¨<code>Operators</code>ï¼Œåœ¨å“åº”å¼ç¼–ç¨‹æ¦‚å¿µé‡Œå¯ä»¥åˆ©ç”¨å…¶ç»„åˆå‡ºæ–°çš„è¡Œä¸ºå’Œäº‹ä»¶ã€‚åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥ç”¨å®ƒç”¨æ¥æ“ä½œè¿™ä¸ªä¸å¯å˜çš„<code>Obversable</code>ä»è€Œç”Ÿæˆä½ æƒ³è¦çš„ç»“æœï¼ŒåŒæ—¶ï¼Œå¯ä»¥é‡‡ç”¨å¤šä¸ªé“¾å¼è°ƒç”¨æ¥è¿›è¡Œæ›´åŠ å¤æ‚çš„æ“ä½œï¼Œå¦‚ï¼š</p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">obversables.filter(<span class="function"><span class="params">(event)</span> =&gt;</span> &#123;<span class="keyword">return</span> event === <span class="string">'keydown'</span> &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Observable"><a href="#Observable" class="headerlink" title="Observable"></a>Observable</h2><p>Observable å®é™…ä¸Šæ˜¯åº”ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼å’Œè¿­ä»£å™¨æ¨¡å¼çš„äº‹ä»¶æˆ–è€…è¯´æ¶ˆæ¯åºåˆ—ã€‚åœ¨RxJsä¸­æä¾›äº†å¤šä¸ªAPIæ¥å°†ç”Ÿæˆ<code>Observable</code>å¯¹è±¡ï¼Œå¦‚åŸºæœ¬çš„create,of, fromEventç­‰ã€‚</p>
<p><code>Observable</code>å¯ä»¥è¢«è®¢é˜…(subscribe)ï¼Œéšåä¼šå°†æ•°æ®pushç»™æ‰€æœ‰è®¢é˜…è€…(subscribers)ã€‚</p>
<p>ä½ å¯èƒ½åœ¨å¤„ç†å¼‚æ­¥æ“ä½œçš„æ—¶å€™ï¼Œä¼šåº”ç”¨åˆ°<code>Promise</code>è¿™ä¸ªæŠ€æœ¯ã€‚é‚£ä¹ˆ<code>Observable</code>å’Œ<code>Promise</code>ç›¸æ¯”ï¼Œåˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆï¼ŒObservableæ˜¯ä¸å¯å˜çš„ï¼Œè¿™ä¹Ÿæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ã€‚ä½ æ¯æ¬¡éœ€è¦è·å–æ–°çš„åºåˆ—çš„æ—¶å€™ï¼Œéƒ½éœ€è¦åˆ©ç”¨å‡½æ•°æ“ä½œå¯¹å…¶åšå˜æ¢ï¼Œè¿™ä¹Ÿé¿å…äº†æ— æ„ä¸­ä¿®æ”¹æ•°æ®é€ æˆçš„Bugã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬çŸ¥é“Promiseå¯¹è±¡ä¸€æ—¦ç”Ÿæˆå¹¶è§¦å‘åï¼Œæ˜¯ä¸å¯ä»¥å–æ¶ˆçš„ï¼Œè€ŒObservableæ˜¯å¯ä»¥ï¼Œè¿™ä¹Ÿæä¾›äº†ä¸€äº›çµæ´»æ€§ã€‚åŒæ—¶ï¼Œå½“ä½ éœ€è¦å…±äº«å˜é‡çš„æ—¶å€™ï¼Œ<code>Observable</code>æ˜¯å¯ä»¥ç»„åˆä½¿ç”¨çš„ã€‚æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªç‰¹æ€§æ˜¯<code>Promise</code>æ¯æ¬¡åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œ<code>Observable</code>å¯ä»¥è¿”å›å¤šå€¼ã€‚</p>
<h2 id="Observer"><a href="#Observer" class="headerlink" title="Observer"></a>Observer</h2><blockquote>
<p> <strong>Observer:</strong> is a collection of callbacks that knows how to listen to values delivered by the Observable.</p>
</blockquote>
<p><code>Observer</code>å°±æ˜¯ä¸€ç»„å›è°ƒå‡½æ•°çš„é›†åˆï¼ŒåŒ…æ‹¬next, error, completeä¸‰ä¸ªï¼Œå®ƒçš„å€¼æ˜¯<code>Observable</code>ä¼ è¿›æ¥çš„ï¼Œç„¶ååœ¨ç›‘å¬çš„æ—¶å€™æ¥è§¦å‘è¿™äº›å‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = Rx.Observable.create(<span class="function"><span class="keyword">function</span> (<span class="params">observer</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Hello'</span>);</span><br><span class="line">  observer.next(<span class="number">42</span>);</span><br><span class="line">  observer.next(<span class="number">100</span>);</span><br><span class="line">  observer.next(<span class="number">200</span>);</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    observer.next(<span class="number">300</span>); <span class="comment">// happens asynchronously</span></span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'before'</span>);</span><br><span class="line">foo.subscribe(<span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'after'</span>);</span><br><span class="line"></span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"><span class="string">"before"</span></span><br><span class="line"><span class="string">"Hello"</span></span><br><span class="line"><span class="number">42</span></span><br><span class="line"><span class="number">100</span></span><br><span class="line"><span class="number">200</span></span><br><span class="line"><span class="string">"after"</span></span><br><span class="line"><span class="number">300</span></span><br></pre></td></tr></table></figure>
<h2 id="Operator"><a href="#Operator" class="headerlink" title="Operator"></a>Operator</h2><p>ç”±äº<code>Observables</code>æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤è¦æ ¹æ®åŸç”Ÿçš„æ•°æ®ç»“æ„ç”Ÿæˆæ–°çš„æ•°æ®ç»“æ„ï¼Œå¿…é¡»è¦å€ŸåŠ©å¼ºå¤§çš„å‡½æ•°ç»„åˆæ¥è¾¾åˆ°æ•ˆæœã€‚<code>Operator</code>å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªå·¥å…·ç®±ã€‚å®ƒä¸ä»…ä»…æä¾›äº†æˆ‘ä»¬å¸¸è§çš„<code>map</code>,<code>filter</code>,<code>reduce</code>æ“ä½œï¼Œä¹Ÿæä¾›äº†å¦‚è¿æ¥ï¼Œæ¡ä»¶åˆ¤æ–­ï¼Œè½¬æ¢ï¼Œèšåˆï¼Œæ“ä½œæ—¶é—´ç­‰æ–¹æ³•ã€‚</p>
<p>åœ¨JavascriptåŸç”Ÿçš„æ•°ç»„æ“ä½œä¸­ï¼Œä¹Ÿç»å¸¸å¯ä»¥çœ‹åˆ°<code>map</code>,<code>filter</code>,<code>reduce</code>ç­‰å‡½æ•°çš„èº«å½±ï¼Œå¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> source = [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'hello'</span>, <span class="string">'world'</span>];</span><br><span class="line"><span class="keyword">var</span> result = source.map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="built_in">parseInt</span>(x)).filter(<span class="function"><span class="params">x</span> =&gt;</span> !<span class="built_in">isNaN</span>(x));</span><br></pre></td></tr></table></figure>
<p>è€ŒRxJsæä¾›çš„Operatorå’Œå¯¹æ•°ç»„æ“ä½œçš„åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼ŸOperatorå·¥ä½œå’Œæ•°ç»„ç›¸æ¯”è¾ƒè€Œè¨€ï¼Œæ•°ç»„æ¯æ¬¡æ“ä½œä¼šç›´æ¥å¤„ç†æ•´ä¸ªæ•°ç»„ï¼Œä½†æ˜¯Operatoræ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå®ƒä¼šåœ¨å¤„ç†å®Œä¸€ä¸ªå€¼åæ‰è½¬å»å¤„ç†ä¸‹ä¸€ä¸ªå€¼ã€‚</p>
<h3 id="å®‰è£…å’Œä½¿ç”¨"><a href="#å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="å®‰è£…å’Œä½¿ç”¨"></a>å®‰è£…å’Œä½¿ç”¨</h3><p>ç°åœ¨å®˜æ–¹æä¾›çš„RxJsæœ‰ä¸¤ä¸ªä»“åº“ï¼Œ<a href="https://github.com/ReactiveX/RxJS" target="_blank" rel="noopener">RxJs5</a>ä»¥åŠ<a href="https://github.com/Reactive-Extensions/RxJS" target="_blank" rel="noopener">RxJS</a>,ä½ å¯ä»¥è‡ªå·±é€‰æ‹©</p>
<p>å®‰è£…rxjsç”¨</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> rx</span><br></pre></td></tr></table></figure>
<p>è€Œå®‰è£…rxjs5å°±ç”¨</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> rxjs</span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯¼å…¥é¡¹ç›®ä¸­åº”ç”¨å°±å¯ä»¥äº†ã€‚</p>
<p><strong>å¦‚æœä½ å«Œéº»çƒ¦çš„è¯ï¼Œæˆ‘åœ¨githubä¸Šåˆ›å»ºäº†æ–°çš„åˆå§‹é¡¹ç›®ï¼Œå¯ä»¥ç›´æ¥ä¸Šæ‰‹åº”ç”¨RxJS,ä»“åº“åœ°å€<a href="https://github.com/scq000/rxjs-quick-starter" target="_blank" rel="noopener">https://github.com/scq000/rxjs-quick-starter</a>ã€‚</strong>ç”¨æ¥ç»ƒæ‰‹å†™ä¸ªå°Demoè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚</p>
<h1 id="åŠ¨æ‰‹å†™ä¸€å†™"><a href="#åŠ¨æ‰‹å†™ä¸€å†™" class="headerlink" title="åŠ¨æ‰‹å†™ä¸€å†™"></a>åŠ¨æ‰‹å†™ä¸€å†™</h1><p>ä¸‹é¢æˆ‘ä»¬æ¥å†™ä¸€ä¸ªå°çš„Demoã€‚ä»»åŠ¡æ˜¯é€šè¿‡æŸ¥è¯¢<a href="https://developer.github.com/v3/" target="_blank" rel="noopener">GitHubçš„API</a>ï¼Œ è·å–ç”¨æˆ·åˆ—è¡¨,ç„¶åå½“ç‚¹å‡»ç‰¹å®šç”¨æˆ·åçš„æ—¶å€™ï¼Œè·å–è¿™ä¸ªç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚åŸºäºGithubå®˜æ–¹çš„æä¾›çš„ä¸¤ä¸ªAPIï¼š</p>
<ol>
<li><a href="https://api.github.com/users" target="_blank" rel="noopener">https://api.github.com/users</a></li>
<li><a href="https://api.github.com/users/username" target="_blank" rel="noopener">https://api.github.com/users/username</a></li>
</ol>
<p>å…¶å®ï¼Œåˆ©ç”¨åŸç”Ÿçš„Javascriptæˆ‘ä»¬ä¹Ÿèƒ½å¾ˆå¥½åœ°å®ç°è¿™æ ·çš„éœ€æ±‚ã€‚ä¸è¿‡æˆ‘ä»¬é€šå¸¸ä¼šä¾èµ–å‰ä¸€æ¬¡çš„å›è°ƒçŠ¶æ€ï¼Œå› æ­¤å®ƒä¸é€‚ç”¨äºæ¨¡å—åŒ–æˆ–è€…ä¿®æ”¹è¦ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå›è°ƒçš„æ•°æ®ï¼‰ã€‚å½“æˆ‘ä»¬è¦å›è°ƒçš„å±‚æ•°æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±é™·å…¥äº†<a href="http://callbackhell.com/" target="_blank" rel="noopener">â€œå›è°ƒåœ°ç‹±â€</a>ä¸­å»äº†ã€‚ç°åœ¨å°±è®©æˆ‘ä»¬çœ‹çœ‹RxJsæ€ä¹ˆå®ç°è¿™æ ·ä¸€ä¸ªéœ€æ±‚å§ã€‚</p>
<ol>
<li><p>å…ˆåˆ›å»ºHTMLé¡µé¢ç»“æ„ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"getAllBtn"</span>&gt;</span>Get All Users<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onsubmit</span>=<span class="string">"return false;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"search-input"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"search"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"user-lists"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"user-info"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>â€‹</p>
</li>
<li><p>å†™JSä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥ä¾èµ–</span></span><br><span class="line"><span class="keyword">const</span> $ = <span class="built_in">require</span>(<span class="string">'jquery'</span>);</span><br><span class="line"><span class="keyword">const</span> Rx = <span class="built_in">require</span>(<span class="string">'rxjs/Rx'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–é¡µé¢å…ƒç´ </span></span><br><span class="line"><span class="keyword">const</span> getAllBtn = $(<span class="string">'#getAllBtn'</span>);</span><br><span class="line"><span class="keyword">const</span> searchInput = $(<span class="string">'#search-input'</span>);</span><br><span class="line"><span class="keyword">let</span> keyword = <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰äº‹ä»¶æµ</span></span><br><span class="line"><span class="keyword">const</span> clickEventStream = Rx.Observable.fromEvent(getAllBtn, <span class="string">'click'</span>);</span><br><span class="line"><span class="keyword">const</span> inputEventStream = Rx.Observable.fromEvent(searchInput, <span class="string">'keyup'</span>).filter(<span class="function"><span class="params">event</span> =&gt;</span> event.keyCode !== <span class="number">13</span>);</span><br><span class="line"><span class="keyword">const</span> clickUserItemStream = Rx.Observable.fromEvent($(<span class="string">'#user-lists'</span>), <span class="string">'click'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†ç”¨æˆ·è§¦å‘çš„äº‹ä»¶æµè½¬æ¢æˆAPIè¯·æ±‚æµ</span></span><br><span class="line"><span class="keyword">const</span> getUserListStream = clickEventStream.flatMap(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> Rx.Observable.fromPromise($.getJSON(<span class="string">'https://api.github.com/users'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filterUserStream = inputEventStream.flatMap(<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> Rx.Observable.fromPromise($.getJSON(<span class="string">'https://api.github.com/users'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getUserInformation = clickUserItemStream.flatMap(<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(event.target.innerText);</span><br><span class="line">  <span class="keyword">return</span> Rx.Observable.fromPromise($.getJSON(<span class="string">'https://api.github.com/users/'</span> + event.target.innerText));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“å“åº”åˆ°è¾¾æ—¶è§¦å‘</span></span><br><span class="line">getUserInformation.subscribe(<span class="function"><span class="params">user</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(user);</span><br><span class="line">  renderUserInfo(user);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">filterUserStream.subscribe(<span class="function"><span class="params">users</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(users);</span><br><span class="line">  renderUserLists(users.filter(<span class="function"><span class="params">user</span> =&gt;</span> user.login.includes(keyword)));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">clickEventStream.subscribe(</span><br><span class="line">  value =&gt; <span class="built_in">console</span>.log(<span class="string">'GetUsers btn click!'</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">inputEventStream.subscribe(<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(searchInput.val());</span><br><span class="line">  keyword = searchInput.val();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">clickUserItemStream.subscribe(<span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(event.target);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">getUserListStream.catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  Rx.Observable.of(err); <span class="comment">//ä½¿ç”¨catchå‡½æ•°é¿å…é”™è¯¯è¢«ä¸­æ–­</span></span><br><span class="line">&#125;).subscribe(<span class="function"><span class="params">users</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(users);</span><br><span class="line">  renderUserLists(users)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†æ•°æ®æ¸²æŸ“åˆ°DOMå…ƒç´ ä¸Š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderUserLists</span>(<span class="params">users</span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'#user-lists'</span>).html(<span class="string">''</span>);</span><br><span class="line">  users.forEach(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">    $(<span class="string">'#user-lists'</span>).append(<span class="string">`&lt;li&gt;<span class="subst">$&#123;user.login&#125;</span>&lt;/li&gt;`</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderUserInfo</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  $(<span class="string">'#user-info'</span>).html(<span class="string">''</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> user) &#123;</span><br><span class="line">    $(<span class="string">'#user-info'</span>).append(<span class="string">`&lt;div&gt;<span class="subst">$&#123;key&#125;</span> ---&gt; <span class="subst">$&#123;user[key]&#125;</span>&lt;/div&gt;`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ä»£ç å·²ç»æ”¾åœ¨<a href="https://github.com/scq000/rxjs-demo" target="_blank" rel="noopener">Github</a>ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥<code>clone</code>ä¸‹æ¥è·‘è·‘çœ‹ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å“åº”å¼ç¼–ç¨‹çš„æ€æƒ³æ¯”è¾ƒä¸å¥½ç†è§£ï¼Œæˆ‘åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œä¹ŸæŸ¥é˜…äº†å¾ˆå¤šçš„èµ„æ–™ï¼Œåªèƒ½ç®—æ˜¯åˆšåˆšå…¥é—¨ã€‚æ‰€ä»¥ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿç®—æ˜¯å¯¹æ•´ä¸ªå­¦ä¹ è¿‡ç¨‹çš„ä¸€æ¬¡æ€»ç»“å§ã€‚</p>
<h1 id="Read-More"><a href="#Read-More" class="headerlink" title="Read More"></a><em>Read More</em></h1><p><a href="https://en.wikipedia.org/wiki/Reactive_programming" target="_blank" rel="noopener">React Programming</a><br><a href="https://codewords.recurse.com/issues/two/an-introduction-to-reactive-programming" target="_blank" rel="noopener">An introduction to reactive programming</a><br><a href="http://www.slideshare.net/edwardamsden/introduction-to-functional-reactive-programming" target="_blank" rel="noopener">Slidershare: introduction to functional reactive programming</a><br><a href="http://haskell.cs.yale.edu/wp-content/uploads/2011/02/frp-1st.pdf" target="_blank" rel="noopener">Functional Reactive Programming from First Principles</a><br><a href="https://www.cs.rit.edu/~mtf/student-resources/20103_amsden_istudy.pdf" target="_blank" rel="noopener"> A survey of functional reactive programming</a></p>
<p><a href="http://www.ituring.com.cn/article/261155" target="_blank" rel="noopener">å“åº”å¼ç¼–ç¨‹ä¸€è§ˆ</a></p>
<p><a href="http://www.zhidao91.com/csharp-list16/" target="_blank" rel="noopener">C#è®¾è®¡æ¨¡å¼ç³»åˆ—(16)-è¿­ä»£å™¨æ¨¡å¼</a><br><a href="http://reactivex.io/learnrx/" target="_blank" rel="noopener">å­¦ä¹ æ•™ç¨‹</a><br><a href="http://xgrommx.github.io/rx-book/index.html" target="_blank" rel="noopener">RxJs GitBook</a><br><a href="http://reactivex.io/rxjs/manual/overview.html" target="_blank" rel="noopener">RxJså®˜æ–¹æ–‡æ¡£</a><br><a href="https://egghead.io/lessons/rxjs-reactive-programming-what-is-rxjs?course=introduction-to-reactive-programming" target="_blank" rel="noopener">Introduction to reactive programming è§†é¢‘</a></p>
</div><div class="tags"><a href="/tags/javascript/">javascript</a></div><div class="post-nav"><a class="pre" href="/2016/11/05/å‰ç«¯çš„å¼‚æ­¥è§£å†³æ–¹æ¡ˆä¹‹Promiseå’ŒAwait-Async/">å‰ç«¯çš„å¼‚æ­¥è§£å†³æ–¹æ¡ˆä¹‹Promiseå’ŒAwait/Async</a><a class="next" href="/2016/10/29/pythonçˆ¬è™«å°ç»“/">pythonçˆ¬è™«å°ç»“</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="http://yoursite.com"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/æ€§èƒ½ä¼˜åŒ–/" style="font-size: 15px;">æ€§èƒ½ä¼˜åŒ–</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/vuex/" style="font-size: 15px;">vuex</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/ç”Ÿæ´»/" style="font-size: 15px;">ç”Ÿæ´»</a> <a href="/tags/æŠ€æœ¯/" style="font-size: 15px;">æŠ€æœ¯</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/æ­£åˆ™/" style="font-size: 15px;">æ­£åˆ™</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/redux/" style="font-size: 15px;">redux</a> <a href="/tags/è®¾è®¡æ¨¡å¼/" style="font-size: 15px;">è®¾è®¡æ¨¡å¼</a> <a href="/tags/flexbox/" style="font-size: 15px;">flexbox</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/å¼‚æ­¥/" style="font-size: 15px;">å¼‚æ­¥</a> <a href="/tags/å‡½æ•°å¼ç¼–ç¨‹/" style="font-size: 15px;">å‡½æ•°å¼ç¼–ç¨‹</a> <a href="/tags/css-grid/" style="font-size: 15px;">css,grid</a> <a href="/tags/æ­£åˆ™è¡¨è¾¾å¼/" style="font-size: 15px;">æ­£åˆ™è¡¨è¾¾å¼</a> <a href="/tags/è·¨åŸŸ/" style="font-size: 15px;">è·¨åŸŸ</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/08/30/ç¥å¥‡çš„Lambdaè¡¨è¾¾å¼â€”â€”å‡½æ•°å¼ç¼–ç¨‹å¿…å­¦/">ç¥å¥‡çš„Lambdaè¡¨è¾¾å¼â€”â€”å‡½æ•°å¼ç¼–ç¨‹å¿…å­¦</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/12/ES2019æ–°ç‰¹æ€§é¢„è§ˆ/">ES2019æ–°ç‰¹æ€§é¢„è§ˆ</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/17/CSS-Grid-ç½‘æ ¼å¸ƒå±€å…¨æ”»ç•¥/">CSS Grid ç½‘æ ¼å¸ƒå±€å…¨æ”»ç•¥</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/16/æ­£åˆ™è¡¨è¾¾å¼ä¸è¦èƒŒ/">æ­£åˆ™è¡¨è¾¾å¼ä¸è¦èƒŒ</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/26/ç†è§£Reduxä¸­é—´ä»¶/">ç†è§£Reduxä¸­é—´ä»¶</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/11/Reactä¸­çš„äº”ç§ç»„ä»¶å½¢å¼/">Reactä¸­çš„äº”ç§ç»„ä»¶å½¢å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/24/æµ…è°ˆæ€§èƒ½ä¼˜åŒ–ä¹‹Tree-Shaking/">æµ…è°ˆæ€§èƒ½ä¼˜åŒ–ä¹‹Tree Shaking</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/08/é‚£äº›å¹´ï¼Œé‚£äº›è·¨åŸŸé—®é¢˜/">é‚£äº›å¹´ï¼Œé‚£äº›è·¨åŸŸé—®é¢˜</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/30/å“åº”å¼å›¾ç‰‡çš„å¤„ç†/">å“åº”å¼å›¾ç‰‡çš„å¤„ç†</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/09/ES6è¯­è¨€ç‰¹æ€§çš„æ€»ç»“-3/">ES6è¯­è¨€ç‰¹æ€§çš„æ€»ç»“(3)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2019 <a href="/." rel="nofollow">Paolino.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>